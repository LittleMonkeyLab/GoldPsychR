{
  "hash": "5883a2a67e01f7de635c0df7dec37aea",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R Handbook\"\nsubtitle: \"Quick Reference for Research Methods Labs\"\nauthor: \"Gordon Wright\"\ndate: \"2026\"\nformat: \n  html:\n    toc: true\n    toc-depth: 3\n    toc-expand: 2\n    number-sections: true\n    code-fold: false\n    code-tools: true\n    theme: \n      light: cosmo\n      dark: darkly\n    highlight-style: github\n    embed-resources: true\n  typst: \n    mainfont: \"Atkinson Hyperlegible\"\n---\n\n# About This Handbook\n\nThis handbook is a **reference companion** for your Research Methods labs. Use it to look up R code patterns when you're working on assignments.\n\n::: {.callout-tip}\n## How to Use\n\n- **Search** (Ctrl/Cmd + F) for what you need\n- **Copy** code examples and adapt them\n- **Bookmark** this page for quick access\n:::\n\n# R Basics\n\n## Assignment and Objects\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Assign a value to a variable\nx <- 5\nmy_score <- 42\n\n# View a variable\nx\nprint(my_score)\n\n# Remove a variable\nrm(x)\n\n# List all objects in environment\nls()\n```\n:::\n\n\n## Data Types\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Numeric\nage <- 25\nheight <- 1.75\n\n# Character (text)\nname <- \"Alice\"\ngroup <- \"control\"\n\n# Logical (TRUE/FALSE)\npassed <- TRUE\nis_control <- FALSE\n\n# Check type\nclass(age)        # \"numeric\"\nclass(name)       # \"character\"\nclass(passed)     # \"logical\"\n```\n:::\n\n\n## Vectors\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a vector with c()\nscores <- c(4, 5, 3, 2, 5)\nnames <- c(\"Alice\", \"Bob\", \"Carol\")\nconditions <- c(TRUE, FALSE, TRUE)\n\n# Access elements\nscores[1]         # First element: 4\nscores[2:4]       # Elements 2 through 4\nscores[c(1, 3)]   # Elements 1 and 3\n\n# Useful functions\nlength(scores)    # Number of elements\nsum(scores)       # Sum of all elements\nmean(scores)      # Average\nmin(scores)       # Minimum\nmax(scores)       # Maximum\n```\n:::\n\n\n## Basic Operations\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Arithmetic\n5 + 3     # Addition\n10 - 4    # Subtraction\n6 * 7     # Multiplication\n20 / 4    # Division\n2 ^ 3     # Exponent (2 cubed = 8)\n17 %% 5   # Modulo (remainder: 2)\n\n# Comparisons (return TRUE/FALSE)\n5 > 3     # Greater than\n5 < 3     # Less than\n5 == 5    # Equal to\n5 != 3    # Not equal to\n5 >= 5    # Greater than or equal\n5 <= 3    # Less than or equal\n\n# Logical operators\nTRUE & FALSE   # AND: FALSE\nTRUE | FALSE   # OR: TRUE\n!TRUE          # NOT: FALSE\n```\n:::\n\n\n# Working with Data\n\n## Loading Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# From CSV (readr package - recommended)\nlibrary(readr)\ndata <- read_csv(\"filename.csv\")\ndata <- read_csv(\"path/to/filename.csv\")\n\n# From CSV (base R)\ndata <- read.csv(\"filename.csv\")\n\n# From URL\ndata <- read_csv(\"https://example.com/data.csv\")\n\n# Suppress column type messages\ndata <- read_csv(\"filename.csv\", show_col_types = FALSE)\n```\n:::\n\n\n## Inspecting Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# First/last rows\nhead(data)        # First 6 rows\nhead(data, 10)    # First 10 rows\ntail(data)        # Last 6 rows\n\n# Structure and dimensions\nstr(data)         # Structure with types\ndim(data)         # Rows and columns\nnrow(data)        # Number of rows\nncol(data)        # Number of columns\n\n# Column names\nnames(data)       # All column names\ncolnames(data)    # Same as names()\n\n# Summary statistics\nsummary(data)     # Summary of all columns\n```\n:::\n\n\n## Accessing Columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using $ (most common)\ndata$age\ndata$group\n\n# Using [[ ]]\ndata[[\"age\"]]\n\n# Using [ ] with column name\ndata[, \"age\"]\n\n# Using [ ] with column number\ndata[, 1]         # First column\ndata[, 2:4]       # Columns 2 through 4\n```\n:::\n\n\n## Creating New Columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Simple calculation\ndata$new_column <- data$column1 + data$column2\n\n# With conditions\ndata$category <- ifelse(data$score > 50, \"high\", \"low\")\n\n# Multiple conditions\ndata$grade <- case_when(\n  data$score >= 70 ~ \"A\",\n  data$score >= 60 ~ \"B\",\n  data$score >= 50 ~ \"C\",\n  TRUE ~ \"F\"\n)\n```\n:::\n\n\n# Data Wrangling (dplyr)\n\n## The Pipe Operator\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\n# Pipe: |> (or %>%)\n# Takes output from left, passes as first argument to right\n\n# Without pipe\nsummarise(group_by(data, condition), mean = mean(score))\n\n# With pipe (easier to read!)\ndata |>\n  group_by(condition) |>\n  summarise(mean = mean(score))\n```\n:::\n\n\n## Selecting Columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Select specific columns\ndata |> select(id, score, group)\n\n# Select range of columns\ndata |> select(p1:p5)\n\n# Remove columns\ndata |> select(-id, -notes)\n\n# Select by pattern\ndata |> select(starts_with(\"p\"))\ndata |> select(ends_with(\"score\"))\ndata |> select(contains(\"time\"))\n```\n:::\n\n\n## Filtering Rows\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Single condition\ndata |> filter(group == \"control\")\ndata |> filter(age > 25)\n\n# Multiple conditions (AND)\ndata |> filter(group == \"control\", time == \"pre\")\ndata |> filter(group == \"control\" & time == \"pre\")\n\n# Multiple conditions (OR)\ndata |> filter(group == \"control\" | group == \"treatment\")\ndata |> filter(group %in% c(\"control\", \"treatment\"))\n\n# Exclude missing values\ndata |> filter(!is.na(score))\n```\n:::\n\n\n## Creating/Modifying Columns\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create new column\ndata |> mutate(total = p1 + p2 + p3)\n\n# Modify existing column\ndata |> mutate(score = score / 100)\n\n# Multiple operations\ndata |> mutate(\n  total = p1 + p2 + p3,\n  mean_score = total / 3,\n  category = ifelse(total > 10, \"high\", \"low\")\n)\n```\n:::\n\n\n## Grouping and Summarising\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Group by one variable\ndata |>\n  group_by(condition) |>\n  summarise(\n    mean = mean(score, na.rm = TRUE),\n    sd = sd(score, na.rm = TRUE),\n    n = n()\n  )\n\n# Group by multiple variables\ndata |>\n  group_by(condition, time) |>\n  summarise(\n    mean = mean(score, na.rm = TRUE),\n    sd = sd(score, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  )\n\n# Count observations\ndata |> count(condition)\ndata |> count(condition, time)\n```\n:::\n\n\n## Arranging (Sorting)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Sort ascending\ndata |> arrange(score)\n\n# Sort descending\ndata |> arrange(desc(score))\n\n# Sort by multiple columns\ndata |> arrange(group, desc(score))\n```\n:::\n\n\n# Descriptive Statistics\n\n## Central Tendency\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Mean\nmean(data$score)\nmean(data$score, na.rm = TRUE)  # Ignore missing values\n\n# Median\nmedian(data$score)\nmedian(data$score, na.rm = TRUE)\n\n# Mode (no built-in function)\nnames(sort(table(data$category), decreasing = TRUE))[1]\n```\n:::\n\n\n## Variability\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Standard deviation\nsd(data$score, na.rm = TRUE)\n\n# Variance\nvar(data$score, na.rm = TRUE)\n\n# Range\nrange(data$score, na.rm = TRUE)\nmin(data$score, na.rm = TRUE)\nmax(data$score, na.rm = TRUE)\n\n# Interquartile range\nIQR(data$score, na.rm = TRUE)\n```\n:::\n\n\n## Other Useful Statistics\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Sum\nsum(data$score, na.rm = TRUE)\n\n# Length/count\nlength(data$score)\nn_distinct(data$id)  # Unique values (dplyr)\n\n# Quantiles\nquantile(data$score, probs = c(0.25, 0.5, 0.75), na.rm = TRUE)\n\n# Comprehensive summary\nsummary(data$score)\n```\n:::\n\n\n# Questionnaire Scoring\n\n## Reverse Scoring\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# For 1-5 scale: reversed = 6 - original\ndata$rev_item <- 6 - data$item\n\n# For 1-7 scale: reversed = 8 - original\ndata$rev_item <- 8 - data$item\n\n# For 0-4 scale: reversed = 4 - original\ndata$rev_item <- 4 - data$item\n\n# General formula: reversed = (max + min) - original\n# For 1-5: max + min = 6, so 6 - original\n```\n:::\n\n\n## Creating Scale Scores\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Sum score\ndata$total <- data$item1 + data$item2 + data$item3 + \n              data$rev_item4 + data$rev_item5\n\n# Using rowSums (more efficient)\ndata$total <- rowSums(data[, c(\"item1\", \"item2\", \"item3\", \n                                \"rev_item4\", \"rev_item5\")],\n                      na.rm = TRUE)\n\n# Mean score\ndata$mean_score <- rowMeans(data[, c(\"item1\", \"item2\", \"item3\",\n                                      \"rev_item4\", \"rev_item5\")],\n                            na.rm = TRUE)\n```\n:::\n\n\n# Visualisation (ggplot2)\n\n## Basic Structure\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\n\n# Basic template\nggplot(data, aes(x = variable1, y = variable2)) +\n  geom_XXXXX() +\n  theme_minimal() +\n  labs(title = \"Title\", x = \"X Label\", y = \"Y Label\")\n```\n:::\n\n\n## Histogram\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic histogram\nggplot(data, aes(x = score)) +\n  geom_histogram(bins = 30)\n\n# Styled histogram\nggplot(data, aes(x = score)) +\n  geom_histogram(bins = 20, fill = \"#4A90A4\", colour = \"white\") +\n  theme_minimal() +\n  labs(title = \"Distribution of Scores\", x = \"Score\", y = \"Count\")\n\n# Histogram by group\nggplot(data, aes(x = score, fill = group)) +\n  geom_histogram(bins = 20, alpha = 0.6, position = \"identity\") +\n  theme_minimal()\n```\n:::\n\n\n## Boxplot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic boxplot\nggplot(data, aes(x = group, y = score)) +\n  geom_boxplot()\n\n# With fill colour\nggplot(data, aes(x = group, y = score, fill = group)) +\n  geom_boxplot(alpha = 0.7)\n\n# Grouped by two variables\nggplot(data, aes(x = group, y = score, fill = time)) +\n  geom_boxplot(alpha = 0.7) +\n  theme_minimal() +\n  labs(title = \"Scores by Group and Time\",\n       x = \"Group\", y = \"Score\", fill = \"Time\")\n```\n:::\n\n\n## Bar Chart\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Counts\nggplot(data, aes(x = group)) +\n  geom_bar()\n\n# From summary data (means)\nggplot(summary_data, aes(x = group, y = mean)) +\n  geom_col(fill = \"#4A90A4\") +\n  theme_minimal()\n\n# With error bars\nggplot(summary_data, aes(x = group, y = mean)) +\n  geom_col(fill = \"#4A90A4\", alpha = 0.7) +\n  geom_errorbar(aes(ymin = mean - se, ymax = mean + se), \n                width = 0.2) +\n  theme_minimal()\n```\n:::\n\n\n## Scatterplot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Basic scatterplot\nggplot(data, aes(x = age, y = score)) +\n  geom_point()\n\n# With regression line\nggplot(data, aes(x = age, y = score)) +\n  geom_point(alpha = 0.5) +\n  geom_smooth(method = \"lm\", se = TRUE) +\n  theme_minimal()\n\n# Coloured by group\nggplot(data, aes(x = age, y = score, colour = group)) +\n  geom_point(alpha = 0.6) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  theme_minimal()\n```\n:::\n\n\n## Customisation\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Themes\n+ theme_minimal()\n+ theme_classic()\n+ theme_bw()\n\n# Labels\n+ labs(\n    title = \"Main Title\",\n    subtitle = \"Subtitle\",\n    caption = \"Data source\",\n    x = \"X-axis Label\",\n    y = \"Y-axis Label\",\n    fill = \"Legend Title\",\n    colour = \"Legend Title\"\n  )\n\n# Colours\n+ scale_fill_manual(values = c(\"control\" = \"#E8E8E8\", \n                                \"treatment\" = \"#4A90A4\"))\n+ scale_colour_manual(values = c(\"pre\" = \"#B8D4E3\", \n                                  \"post\" = \"#4A90A4\"))\n\n# Axis limits\n+ xlim(0, 100)\n+ ylim(0, 50)\n+ coord_cartesian(xlim = c(0, 100), ylim = c(0, 50))\n```\n:::\n\n\n# Common Errors and Fixes\n\n## Object not found\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Error: object 'x' not found\n\n# CAUSE: Variable does not exist\n# FIX: Create it first, or check spelling\n\nx <- 5  # Create the object\nx       # Now it works\n```\n:::\n\n\n## Could not find function\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Error: could not find function \"read_csv\"\n\n# CAUSE: Package not loaded\n# FIX: Load the package first\n\nlibrary(readr)   # Load the package\nread_csv(\"data.csv\")  # Now it works\n```\n:::\n\n\n## NA result\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Getting NA when calculating statistics\n\n# CAUSE: Missing values in data\n# FIX: Add na.rm = TRUE\n\nmean(data$score)                 # Returns NA\nmean(data$score, na.rm = TRUE)   # Returns the mean\n```\n:::\n\n\n## Unexpected symbol\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Error: unexpected symbol in...\n\n# CAUSE: Usually a typo or missing comma/operator\n# FIX: Check for:\n#   - Missing commas between arguments\n#   - Unclosed brackets or quotes\n#   - Typos in function names\n```\n:::\n\n\n## Object of type closure\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Error: object of type 'closure' is not subsettable\n\n# CAUSE: Using a function name as if it were data\n# Common with: data$column (when 'data' is the function)\n\n# FIX: Use a different variable name\nmy_data <- read_csv(\"file.csv\")\nmy_data$column  # Works\n```\n:::\n\n\n# Useful Patterns\n\n## Complete Workflow Template\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# 1. Load packages\nlibrary(readr)\nlibrary(dplyr)\nlibrary(ggplot2)\n\n# 2. Load data\ndata <- read_csv(\"my_data.csv\", show_col_types = FALSE)\n\n# 3. Inspect\nhead(data)\nstr(data)\n\n# 4. Clean/transform\ndata <- data |>\n  mutate(\n    rev_item4 = 6 - item4,\n    rev_item5 = 6 - item5,\n    total = item1 + item2 + item3 + rev_item4 + rev_item5\n  )\n\n# 5. Summarise\nsummary_stats <- data |>\n  group_by(condition, time) |>\n  summarise(\n    mean = mean(total, na.rm = TRUE),\n    sd = sd(total, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  )\n\n# 6. Visualise\nggplot(data, aes(x = condition, y = total, fill = time)) +\n  geom_boxplot(alpha = 0.7) +\n  theme_minimal() +\n  labs(title = \"My Title\", x = \"Condition\", y = \"Score\")\n```\n:::\n\n\n## Reporting Statistics in APA\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get values\nm <- mean(data$score, na.rm = TRUE)\ns <- sd(data$score, na.rm = TRUE)\nn <- sum(!is.na(data$score))\n\n# Format for reporting\nsprintf(\"M = %.2f, SD = %.2f\", m, s)\n# Output: \"M = 3.45, SD = 0.89\"\n\ncat(\"Participants scored moderately (M =\", round(m, 2), \n    \", SD =\", round(s, 2), \n    \", n =\", n, \")\")\n```\n:::\n\n\n# Keyboard Shortcuts\n\n| Action | Windows/Linux | Mac |\n|--------|---------------|-----|\n| Run current line | Ctrl + Enter | Cmd + Enter |\n| Run all code | Ctrl + Shift + Enter | Cmd + Shift + Enter |\n| Insert assignment | Alt + - | Option + - |\n| Insert pipe | Ctrl + Shift + M | Cmd + Shift + M |\n| Comment/uncomment | Ctrl + Shift + C | Cmd + Shift + C |\n| Save | Ctrl + S | Cmd + S |\n| Render document | Ctrl + Shift + K | Cmd + Shift + K |\n| Find | Ctrl + F | Cmd + F |\n\n# Resources\n\n## Official Documentation\n\n- [R for Data Science](https://r4ds.hadley.nz/) - Free online book\n- [ggplot2 documentation](https://ggplot2.tidyverse.org/)\n- [dplyr documentation](https://dplyr.tidyverse.org/)\n- [Quarto guide](https://quarto.org/docs/guide/)\n\n## Getting Help\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Help for a function\n?mean\nhelp(mean)\n\n# Search help\n??regression\n\n# Examples\nexample(mean)\n```\n:::\n\n\n---\n\n::: {.callout-tip}\n## Quick Reference Card\n\nPrint this page or save it as PDF for offline reference!\n:::\n",
    "supporting": [
      "r-handbook_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}
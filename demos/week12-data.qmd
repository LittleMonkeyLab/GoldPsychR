---
title: "Week 12 Data: Review"
subtitle: "Recap of Last Week's Analysis"
author: "Gordon Wright"
date: "2026"
format: 
  html:
    toc: true
    toc-depth: 2
    number-sections: true
    highlight-style: github
    code-block-bg: true
    code-block-border-left: true
filters:
  - webr
webr:
  packages: ['tidyverse']
  autoload-packages: false
include-in-header:
  - text: |
      <script src="https://debruine.github.io/webexercises/webexercises.js"></script>
      <link rel="stylesheet" href="https://debruine.github.io/webexercises/webexercises.css" />
---

```{r, echo = FALSE, results='asis'}
library(webexercises)
knitr::opts_chunk$set(echo = FALSE)
```

## Review: Week 12 Data Analysis

Last week you worked with reaction time data. This page reviews what we did: loading the data, calculating means, comparing conditions, and creating visualizations.

### Download Materials

You can download the data and a notebook template to work through the analysis yourself:

```{=html}
<div style="text-align: center; margin: 20px 0; display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
  <button id="download-csv-btn" 
          style="display: inline-block; 
                 padding: 12px 24px; 
                 background-color: #9B1B30; 
                 color: white; 
                 border: none;
                 border-radius: 5px; 
                 font-weight: bold;
                 font-size: 16px;
                 cursor: pointer;
                 transition: background-color 0.3s;">
    ðŸ“¥ Download Data (CSV)
  </button>
  <button id="download-qmd-btn" 
          style="display: inline-block; 
                 padding: 12px 24px; 
                 background-color: #9B1B30; 
                 color: white; 
                 border: none;
                 border-radius: 5px; 
                 font-weight: bold;
                 font-size: 16px;
                 cursor: pointer;
                 transition: background-color 0.3s;">
    ðŸ“„ Download Notebook (.qmd)
  </button>
</div>
<script>
document.getElementById('download-csv-btn').addEventListener('click', async function() {
  const button = this;
  const originalText = button.innerHTML;
  button.innerHTML = 'â³ Downloading...';
  button.disabled = true;
  try {
    const response = await fetch('https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week_12_data.csv');
    const blob = await response.blob();
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'Y1_Week_12_data.csv';
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
    button.innerHTML = 'âœ… Downloaded!';
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
    }, 2000);
  } catch (error) {
    console.error('Download failed:', error);
    button.innerHTML = 'âŒ Download Failed';
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
    }, 2000);
  }
});

document.getElementById('download-qmd-btn').addEventListener('click', async function() {
  const button = this;
  const originalText = button.innerHTML;
  button.innerHTML = 'â³ Downloading...';
  button.disabled = true;
  try {
    // Try to get from downloads folder first (after render)
    let response = await fetch('../downloads/week12/week12-analysis-notebook.qmd');
    if (!response.ok) {
      // Fallback: try GitHub
      response = await fetch('https://raw.githubusercontent.com/LittleMonkeyLab/GoldPsychR/main/downloads/week12/week12-analysis-notebook.qmd');
      if (!response.ok) {
        // Final fallback: old location
        response = await fetch('https://raw.githubusercontent.com/LittleMonkeyLab/GoldPsychR/main/demos/week12/week12-analysis-notebook.qmd');
      }
    }
    if (!response.ok) throw new Error('File not found');
    const blob = await response.blob();
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'week12-analysis-notebook.qmd';
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
    button.innerHTML = 'âœ… Downloaded!';
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
    }, 2000);
  } catch (error) {
    console.error('Download failed:', error);
    button.innerHTML = 'âŒ Download Failed';
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
    }, 2000);
  }
});
</script>
```

---

## What We Did Last Week

### Slide 1: Introduction

::: {.callout-note}
## Slide 1: Introduction

Open Excel file named Lab 12 data

Data is similar to that from seminar 8

What can you see from this data?
:::

We started by loading the data. Here's how we did it:

```{webr-r}
#| label: load-data
#| echo: true

# Load the data directly from GitHub CSV using base R
data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week_12_data.csv"

# Load the data directly from URL using base R read.csv
Lab_12_data <- read.csv(data_url, stringsAsFactors = FALSE)

# Convert to tibble for better display
library(tibble)
Lab_12_data <- as_tibble(Lab_12_data)

# Display data structure
cat("Data loaded successfully!\n")
cat("========================\n\n")
cat("Dataset dimensions:", nrow(Lab_12_data), "participants Ã—", ncol(Lab_12_data), "variables\n")
cat("\nColumn names:\n")
print(names(Lab_12_data))
cat("\nFirst few rows:\n")
print(head(Lab_12_data))
```

### Slide 2: Understanding the Data

::: {.callout-note}
## Slide 2: Questions

How many participants are there?

**60**

Are all the participants doing exactly the same?

**No â€“ the experimental condition varies**

What can we learn about each participant?

- Scores in each condition
- How this changes between conditions
:::

The dataset contains **60 participants** with reaction time measurements. Each participant completed trials in three conditions (Baseline, Control, Experimental), and participants were assigned to either a Happy or Scary experimental condition.

**Quick check:** How many participants are there?

`r fitb("60", ignore_case = TRUE)`

**Quick check:** Are all participants doing exactly the same?

`r mcq(c("Yes", answer = "No â€“ the experimental condition varies"))`

### Slide 3: Calculating Descriptives

::: {.callout-note}
## Slide 3: Descriptives

What would be the appropriate descriptives?

Mean scores for:
- Baseline
- Control
- Experimental

Also separate means for happy and scary conditions

What do these suggest?
:::

We calculated mean reaction times for each condition. First, we found the overall means across all participants:

```{webr-r}
#| label: task1-calculate
#| echo: true

# Calculate column means first (excluding non-numeric columns like Condition)
numeric_cols <- sapply(Lab_12_data, is.numeric)
myColumnMeans <- colMeans(Lab_12_data[, numeric_cols, drop = FALSE], na.rm = TRUE)

# Find columns for each condition
base_cols <- grep("^Base", names(Lab_12_data), ignore.case = TRUE)
control_cols <- grep("^Control", names(Lab_12_data), ignore.case = TRUE)
expt_cols <- grep("^Expt", names(Lab_12_data), ignore.case = TRUE)

# Calculate overall means for each condition (averaging across trials)
baseMean <- mean(myColumnMeans[base_cols], na.rm = TRUE)
controlMean <- mean(myColumnMeans[control_cols], na.rm = TRUE)
expMean <- mean(myColumnMeans[expt_cols], na.rm = TRUE)

cat("Overall Means:\n")
cat("==============\n\n")
cat("Baseline mean:", round(baseMean, 2), "\n")
cat("Control mean:", round(controlMean, 2), "\n")
cat("Experimental mean:", round(expMean, 2), "\n\n")

# Store for later use
overall_means <- c(baseMean, controlMean, expMean)
```

**What pattern do you notice in these means?**

`r longmcq(c(
  "All means are increasing",
  answer = "Reaction times decrease from Baseline to Control to Experimental",
  "The means are all the same",
  "There is no clear pattern"
))`

Then we calculated separate means for each experimental condition (Happy vs. Scary):

```{webr-r}
#| label: task2-calculate
#| echo: true

# Use by() function to calculate means by condition
groupedMeans <- by(Lab_12_data, Lab_12_data$Condition, colMeans, na.rm = TRUE)

# Extract means for each group
gp1Means <- groupedMeans[[1]]  # Condition 1 (Happy)
gp2Means <- groupedMeans[[2]]  # Condition 2 (Scary)

# Calculate means for each condition type within each group
gp1BaseMean <- mean(gp1Means[base_cols], na.rm = TRUE)
gp1ControlMean <- mean(gp1Means[control_cols], na.rm = TRUE)
gp1ExpMean <- mean(gp1Means[expt_cols], na.rm = TRUE)

gp2BaseMean <- mean(gp2Means[base_cols], na.rm = TRUE)
gp2ControlMean <- mean(gp2Means[control_cols], na.rm = TRUE)
gp2ExpMean <- mean(gp2Means[expt_cols], na.rm = TRUE)

cat("Means by Experimental Condition:\n")
cat("================================\n\n")
cat("Happy Condition (1):\n")
cat("  Baseline:", round(gp1BaseMean, 2), "\n")
cat("  Control:", round(gp1ControlMean, 2), "\n")
cat("  Experimental:", round(gp1ExpMean, 2), "\n\n")

cat("Scary Condition (2):\n")
cat("  Baseline:", round(gp2BaseMean, 2), "\n")
cat("  Control:", round(gp2ControlMean, 2), "\n")
cat("  Experimental:", round(gp2ExpMean, 2), "\n")

# Store for plotting
happy_means <- c(gp1BaseMean, gp1ControlMean, gp1ExpMean)
scary_means <- c(gp2BaseMean, gp2ControlMean, gp2ExpMean)
```

**Why did we calculate separate means for happy vs. scary conditions?**

`r longmcq(c(
  "To see if there are differences between the two groups",
  answer = "To examine whether the experimental manipulation (happy vs. scary) affects the results differently",
  "Because the instructions said to",
  "To make the analysis more complicated"
))`

### Slide 4: Creating Visualizations

::: {.callout-note}
## Slide 4: Visualization

Clearest way to review data is to create a plot

What type of plot would be suitable for this?

Line graph showing changes over conditions

How many lines?
- 1 â€“ just to show change over three conditions
- 2 â€“ showing change separately for two experimental conditions

Create a simple line graph in excel showing the change across the 3 conditions
:::

We created two plots. First, a single line graph showing the overall pattern:

```{webr-r}
#| label: task3-plot
#| echo: true
#| fig-width: 8
#| fig-height: 5

# Use the calculated means from Task 1
conditions <- c("Baseline", "Control", "Experimental")

plot(1:3, overall_means, 
     type = "b",  # Both points and lines
     xlab = "Condition", 
     ylab = "Mean Reaction Time (ms)",
     main = "Overall Mean Reaction Times Across Conditions",
     xaxt = "n",
     pch = 19,
     col = "#9B1B30",
     lwd = 2,
     ylim = c(min(overall_means) * 0.95, max(overall_means) * 1.05))
axis(1, at = 1:3, labels = conditions)
grid()
```

**What does this graph suggest?**

`r longmcq(c(
  "Reaction times increase across conditions",
  answer = "Reaction times decrease from Baseline to Control to Experimental, suggesting improvement with practice",
  "There is no change across conditions",
  "The data shows no clear pattern"
))`

Then we created a graph with two lines to compare the Happy and Scary conditions:

```{webr-r}
#| label: task4-plot
#| echo: true
#| fig-width: 8
#| fig-height: 5

# Use the calculated means from Task 2
all_means <- c(happy_means, scary_means)
y_range <- c(min(all_means) * 0.95, max(all_means) * 1.05)

plot(1:3, happy_means, 
     type = "b",
     xlab = "Condition", 
     ylab = "Mean Reaction Time (ms)",
     main = "Mean Reaction Times by Experimental Condition",
     xaxt = "n",
     pch = 19,
     col = "#2E7D32",  # Green for happy
     lwd = 2,
     ylim = y_range)
lines(1:3, scary_means, 
      type = "b",
      pch = 19,
      col = "#C62828",  # Red for scary
      lwd = 2)
axis(1, at = 1:3, labels = conditions)
legend("topright", 
       legend = c("Happy", "Scary"),
       col = c("#2E7D32", "#C62828"),
       lty = 1,
       lwd = 2,
       pch = 19)
grid()
```

**What does this comparison reveal?**

`r longmcq(c(
  "Both conditions show identical patterns",
  answer = "Both conditions show similar decreases, but the scary condition may have different baseline or change patterns",
  "There is no difference between conditions",
  "The happy condition shows no change"
))`

### Slide 5: Summary

::: {.callout-note}
## Slide 5: Lab Activity Instructions

Open R and import dataset

Answer the questions on the Data Skills sheet

Upload this to the submission link
:::

That's what we covered last week. You can download the data and notebook template above to practice the analysis yourself, or review the code here to refresh your memory.

---

## Summary

Last week we:

1. **Loaded the data** from GitHub
2. **Calculated overall means** for Baseline, Control, and Experimental conditions
3. **Calculated means by condition** (Happy vs. Scary) to compare the experimental groups
4. **Created visualizations** - first a single line graph showing overall patterns, then a multi-line graph comparing the two conditions

The analysis showed that reaction times decreased across conditions, suggesting improvement with practice, and revealed interesting patterns when comparing the Happy and Scary experimental conditions.

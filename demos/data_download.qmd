---
title: "Teaching Y1 Intensive labs with R and without lectures"
subtitle: "An integrated workflow: Slides â†’ WebR â†’ Scaffolded .qmd"
author: "Gordon Wright"
date: "2026"
format: 
  html:
    toc: true
    toc-depth: 2
    number-sections: true
    highlight-style: github
    code-block-bg: true
    code-block-border-left: true
filters:
  - webr
webr:
  packages: ['readr', 'dplyr', 'tibble']
  autoload-packages: false
include-in-header:
  - text: |
      <script src="https://debruine.github.io/webexercises/webexercises.js"></script>
      <link rel="stylesheet" href="https://debruine.github.io/webexercises/webexercises.css" />
---

```{r, echo = FALSE, results='asis'}
library(webexercises)
knitr::opts_chunk$set(echo = FALSE)

# Uncomment to change widget colours:
#style_widgets(incorrect = "goldenrod", correct = "purple", highlight = "firebrick")
```

## Downloading Data from GitHub

This page demonstrates how to download data directly from a GitHub repository and analyze it using WebR.

The data we'll use is from: [lab12_data.csv](https://github.com/LittleMonkeyLab/datarepo/blob/main/lab12_data.csv)

### Download the Dataset

You can download the dataset directly to your computer using the button below:

```{=html}
<div style="text-align: center; margin: 20px 0;">
  <button id="download-csv-btn" 
          style="display: inline-block; 
                 padding: 12px 24px; 
                 background-color: #9B1B30; 
                 color: white; 
                 border: none;
                 border-radius: 5px; 
                 font-weight: bold;
                 font-size: 16px;
                 cursor: pointer;
                 transition: background-color 0.3s;">
    ðŸ“¥ Download lab12_data.csv
  </button>
</div>
<script>
document.getElementById('download-csv-btn').addEventListener('click', async function() {
  const button = this;
  const originalText = button.innerHTML;
  
  // Show loading state
  button.innerHTML = 'â³ Downloading...';
  button.disabled = true;
  
  try {
    // Fetch the CSV file
    const response = await fetch('https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/lab12_data.csv');
    const blob = await response.blob();
    
    // Create a download link
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'lab12_data.csv';
    document.body.appendChild(a);
    a.click();
    
    // Clean up
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
    
    // Reset button
    button.innerHTML = 'âœ… Downloaded!';
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
    }, 2000);
  } catch (error) {
    console.error('Download failed:', error);
    button.innerHTML = 'âŒ Download Failed';
    setTimeout(() => {
      button.innerHTML = originalText;
      button.disabled = false;
    }, 2000);
  }
});
</script>
```

### Step 1: Download the Data (Programmatically)

First, let's download the CSV file from the raw GitHub URL:

```{webr-r}
#| label: download-data
#| echo: true

# The raw GitHub URL for the CSV file
data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/lab12_data.csv"

# Download and read the data using base R (no packages required)
# Alternative: library(readr); lab12_data <- read_csv(data_url, show_col_types = FALSE)
lab12_data <- read.csv(data_url, stringsAsFactors = FALSE)

# Convert to tibble for better printing (optional, requires tibble package)
# library(tibble)
# lab12_data <- as_tibble(lab12_data)

# Display the first few rows
head(lab12_data)
```

### Step 2: Explore the Data Structure

Let's examine the structure and dimensions of the dataset:

```{webr-r}
#| label: data-structure
#| echo: true

# Check the dimensions (rows and columns)
cat("Dataset dimensions:\n")
cat("Rows:", nrow(lab12_data), "\n")
cat("Columns:", ncol(lab12_data), "\n\n")

# View the structure
str(lab12_data)

# Get column names
cat("\nColumn names:\n")
names(lab12_data)
```

### Step 3: Summary Statistics

Let's get summary statistics for the numeric variables:

```{webr-r}
#| label: summary-stats
#| echo: true

# Summary statistics for all numeric columns
summary(lab12_data)
```

### Step 4: Descriptive Statistics by Group

Let's examine the data by different grouping variables:

```{webr-r}
#| label: group-summaries
#| echo: true

# Load required packages
library(dplyr)

# Summary by Condition
cat("=== Summary by Condition ===\n")
lab12_data %>%
  group_by(Condition) %>%
  summarise(
    n = n(),
    mean_age = mean(Age, na.rm = TRUE),
    sd_age = sd(Age, na.rm = TRUE),
    .groups = "drop"
  )

cat("\n=== Summary by Mood Group ===\n")
lab12_data %>%
  group_by(MoodGroup) %>%
  summarise(
    n = n(),
    mean_age = mean(Age, na.rm = TRUE),
    sd_age = sd(Age, na.rm = TRUE),
    .groups = "drop"
  )

cat("\n=== Summary by Gender ===\n")
lab12_data %>%
  group_by(Gender) %>%
  summarise(
    n = n(),
    .groups = "drop"
  )
```

### Step 5: Reaction Time Analysis

The dataset contains reaction time measurements across different conditions (Base, Control, Experimental). Let's calculate means:

```{webr-r}
#| label: reaction-times
#| echo: true

# Load required packages
library(dplyr)

# Calculate mean reaction times for each condition type
cat("=== Mean Reaction Times by Condition Type ===\n")

# Base condition (Base1, Base2, Base3)
base_cols <- c("Base1", "Base2", "Base3")
lab12_data$Base_mean <- rowMeans(lab12_data[, base_cols], na.rm = TRUE)

# Control condition (Control1, Control2, Control3)
control_cols <- c("Control1", "Control2", "Control3")
lab12_data$Control_mean <- rowMeans(lab12_data[, control_cols], na.rm = TRUE)

# Experimental condition (Expt1, Expt2, Expt3)
expt_cols <- c("Expt1", "Expt2", "Expt3")
lab12_data$Expt_mean <- rowMeans(lab12_data[, expt_cols], na.rm = TRUE)

# Display summary statistics
lab12_data %>%
  summarise(
    Base_mean = mean(Base_mean, na.rm = TRUE),
    Base_sd = sd(Base_mean, na.rm = TRUE),
    Control_mean = mean(Control_mean, na.rm = TRUE),
    Control_sd = sd(Control_mean, na.rm = TRUE),
    Expt_mean = mean(Expt_mean, na.rm = TRUE),
    Expt_sd = sd(Expt_mean, na.rm = TRUE)
  )
```

### Step 6: Data Overview Table

Let's create a quick overview of the dataset:

```{webr-r}
#| label: data-overview
#| echo: true

# Load required packages
library(dplyr)

# Create a summary table
overview <- lab12_data %>%
  summarise(
    Total_Participants = n(),
    Mean_Age = round(mean(Age, na.rm = TRUE), 2),
    SD_Age = round(sd(Age, na.rm = TRUE), 2),
    Min_Age = min(Age, na.rm = TRUE),
    Max_Age = max(Age, na.rm = TRUE),
    Conditions = length(unique(Condition)),
    Mood_Groups = length(unique(MoodGroup)),
    Genders = length(unique(Gender))
  )

print(overview)
```

### Step 7: Check for Missing Data

Let's verify data quality:

```{webr-r}
#| label: missing-data
#| echo: true

# Check for missing values in each column
missing_counts <- sapply(lab12_data, function(x) sum(is.na(x)))

# Create a data frame with missing data info
missing_summary <- data.frame(
  Variable = names(missing_counts),
  Missing_Count = missing_counts,
  row.names = NULL
)

# Show only variables with missing data
missing_data <- missing_summary[missing_summary$Missing_Count > 0, ]

if (nrow(missing_data) > 0) {
  print(missing_data)
} else {
  cat("âœ“ No missing data found in the dataset!\n")
}
```

## Summary

This page demonstrated how to:

1. **Download data** directly from a GitHub repository using `read_csv()` with a URL
2. **Explore data structure** using `str()`, `dim()`, and `names()`
3. **Calculate summary statistics** using `summary()` and `dplyr` functions
4. **Group and summarize** data by categorical variables
5. **Compute derived variables** (mean reaction times across trials)
6. **Check data quality** by examining missing values

The dataset contains **60 participants** with reaction time measurements across baseline, control, and experimental conditions, grouped by mood condition (Happy vs. Scary).


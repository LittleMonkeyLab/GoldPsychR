---
title: "Part 3: Independent Samples T-Test"
subtitle: "Lab 2: T-Tests"
format: html
filters:
  - webr
webr:
  packages: ['readr']
  show-startup-message: false
---

```{r, echo = FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

```{webr-r}
#| context: setup
#| warning: false
#| message: false
library(readr)
data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/test_anxiety_data.csv"
anxiety_data <- read_csv(data_url, show_col_types = FALSE)
```

## Watch the Demo

Follow along with the slides below.

```{=html}
<iframe src="part3-slides.html" width="100%" height="500px" style="border: 1px solid #ccc; border-radius: 8px;"></iframe>
```

::: {.callout-tip}
## Tip
Click inside the slide area first, then use arrow keys to navigate.
:::

---

## Try It Yourself

::: {.callout-tip}
## How to Practice
1. **Run the code** to see how independent samples t-tests work
2. **Compare** the two groups
3. **Copy to RStudio** and try with your notebook
:::

### Load the Data

```{webr-r}
# Check the groups
table(anxiety_data$group)
```

### Compare Group Means at Baseline

```{webr-r}
# Descriptives by group
control <- anxiety_data$anxiety_pre[anxiety_data$group == "control"]
intervention <- anxiety_data$anxiety_pre[anxiety_data$group == "intervention"]

cat("Control group:\n")
cat("  Mean:", round(mean(control), 2), "\n")
cat("  SD:", round(sd(control), 2), "\n")
cat("  n:", length(control), "\n\n")

cat("Intervention group:\n")
cat("  Mean:", round(mean(intervention), 2), "\n")
cat("  SD:", round(sd(intervention), 2), "\n")
cat("  n:", length(intervention))
```

### Independent Samples T-Test

Compare the two groups using the formula syntax:

```{webr-r}
# Independent samples t-test (Welch's)
t.test(anxiety_pre ~ group, data = anxiety_data)
```

::: {.callout-note}
## The Formula Syntax
`outcome ~ grouping_variable` means "outcome predicted by group"
:::

### Student's vs Welch's T-Test

```{webr-r}
# Welch's t-test (default, doesn't assume equal variances)
cat("=== Welch's t-test (default) ===\n")
welch <- t.test(anxiety_pre ~ group, data = anxiety_data)
cat("t =", round(welch$statistic, 3), "\n")
cat("df =", round(welch$parameter, 2), "\n")
cat("p =", round(welch$p.value, 4), "\n\n")

# Student's t-test (assumes equal variances)
cat("=== Student's t-test ===\n")
student <- t.test(anxiety_pre ~ group, data = anxiety_data, var.equal = TRUE)
cat("t =", round(student$statistic, 3), "\n")
cat("df =", student$parameter, "\n")
cat("p =", round(student$p.value, 4))
```

### Check Equal Variances

```{webr-r}
# Compare variances
control <- anxiety_data$anxiety_pre[anxiety_data$group == "control"]
intervention <- anxiety_data$anxiety_pre[anxiety_data$group == "intervention"]

cat("Control variance:", round(var(control), 2), "\n")
cat("Intervention variance:", round(var(intervention), 2), "\n")
cat("Ratio:", round(var(control)/var(intervention), 2))
```

### Visualise the Groups

```{webr-r}
# Boxplot comparing groups
boxplot(anxiety_pre ~ group,
        data = anxiety_data,
        main = "Pre-Test Anxiety by Group",
        xlab = "Group",
        ylab = "Anxiety Score",
        col = c("lightcoral", "lightgreen"))
```

---

## Self-Assessment

Check your understanding before moving on.

::: {.webex-check .webex-box}

**1. An independent samples t-test compares:**

`r mcq(c("One sample to a population", "The same people at two times", answer = "Two different groups of people", "Three or more groups"))`

**2. The formula syntax `y ~ x` in R means:**

`r mcq(c("y equals x", answer = "y predicted by x", "y minus x", "y times x"))`

**3. Welch's t-test is more robust because it doesn't assume `r fitb("equal", width = 8)` variances.**

**4. True or False: You should always use Student's t-test instead of Welch's.**

`r torf(FALSE)`

**5. If the two groups have equal sample sizes, the degrees of freedom for Student's t-test is:**

`r mcq(c("n - 1", answer = "n1 + n2 - 2", "n1 × n2", "(n1 - 1)(n2 - 1)"))`

:::

---

## Next Steps

::: {.d-flex .justify-content-between}
[← Back to Part 2](part2.qmd){.btn .btn-secondary}

[Continue to Part 4: Paired Samples →](part4.qmd){.btn .btn-primary}
:::

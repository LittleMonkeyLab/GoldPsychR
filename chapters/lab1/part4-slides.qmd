---
title: "Part 4: Descriptives & Plots"
subtitle: "Lab 1: Descriptive Statistics"
format:
  revealjs:
    slide-number: true
    progress: true
    hash: true
    transition: fade
    width: 1050
    height: 700
    theme: default
    logo: ../../assets/images/GoldLogo.png
    footer: "GoldPsychR - Lab 1, Part 4"
    embed-resources: false
    css: part-slides.css
filters:
  - webr
  - countdown
webr:
  packages: ['dplyr', 'ggplot2']
  show-startup-message: false
---

## Descriptive Statistics

**The Big Three:**

- **Mean** (M) - the average
- **Standard Deviation** (SD) - the spread
- **Sample Size** (n) - how many participants

---

## Basic Functions

```{webr-r}
scores <- c(4, 5, 3, 2, 5, 4, 3, 5, 4, 4)

mean(scores)    # Average
sd(scores)      # Spread
length(scores)  # Count
```

---

## The NA Problem

Missing values cause trouble:

```{webr-r}
scores_with_na <- c(4, 5, NA, 2, 5)

mean(scores_with_na)  # Returns NA!
```

**Fix:** Add `na.rm = TRUE`

```{webr-r}
scores_with_na <- c(4, 5, NA, 2, 5)

mean(scores_with_na, na.rm = TRUE)  # Works!
```

---

## Grouped Summaries with dplyr

We want statistics **by group**. Enter `dplyr`:

```{webr-r}
library(dplyr)

# The pipe |> passes data forward
# group_by() splits by categories
# summarise() calculates stats
```

---

## The Pipe: |>

The pipe takes output from the left and feeds it to the right:

```{webr-r}
library(dplyr)

data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week13_Lab1_grit_data.csv"
data <- read.csv(data_url, stringsAsFactors = FALSE)

data |>
  head(3)  # Same as head(data, 3)
```

---

## Group By + Summarise

```{webr-r}
library(dplyr)

data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week13_Lab1_grit_data.csv"
data <- read.csv(data_url, stringsAsFactors = FALSE)

# Reverse-score items
data$rev_G1 <- 6 - data$G1
data$rev_G3 <- 6 - data$G3
data$rev_G5 <- 6 - data$G5
data$rev_G6 <- 6 - data$G6

# Create subscales
data$consistency <- data$rev_G1 + data$rev_G3 + data$rev_G5 + data$rev_G6
data$perseverance <- data$G2 + data$G4 + data$G7 + data$G8
data$Study_Year <- factor(data$Study_Year)

data |>
  group_by(Study_Year) |>
  summarise(
    mean_consistency = mean(consistency),
    sd_consistency = sd(consistency),
    mean_perseverance = mean(perseverance),
    sd_perseverance = sd(perseverance),
    n = n()
  )
```

---

## Statistics for Both Subscales

```{webr-r}
library(dplyr)

data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week13_Lab1_grit_data.csv"
data <- read.csv(data_url, stringsAsFactors = FALSE)

data$rev_G1 <- 6 - data$G1
data$rev_G3 <- 6 - data$G3
data$rev_G5 <- 6 - data$G5
data$rev_G6 <- 6 - data$G6
data$consistency <- data$rev_G1 + data$rev_G3 + data$rev_G5 + data$rev_G6
data$perseverance <- data$G2 + data$G4 + data$G7 + data$G8
data$Study_Year <- factor(data$Study_Year)

data |>
  group_by(Study_Year) |>
  summarise(
    M_consistency = round(mean(consistency), 2),
    SD_consistency = round(sd(consistency), 2),
    M_perseverance = round(mean(perseverance), 2),
    SD_perseverance = round(sd(perseverance), 2),
    n = n(),
    .groups = "drop"
  )
```

---

## Visualisation with ggplot2

**Grammar of Graphics:**

1. **Data** - what to plot
2. **Aesthetics** - how to map variables
3. **Geometry** - what shapes to use

---

## Basic Boxplot

```{webr-r}
library(ggplot2)

data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week13_Lab1_grit_data.csv"
data <- read.csv(data_url, stringsAsFactors = FALSE)

data$rev_G1 <- 6 - data$G1
data$rev_G3 <- 6 - data$G3
data$rev_G5 <- 6 - data$G5
data$rev_G6 <- 6 - data$G6
data$consistency <- data$rev_G1 + data$rev_G3 + data$rev_G5 + data$rev_G6
data$perseverance <- data$G2 + data$G4 + data$G7 + data$G8
data$Study_Year <- factor(data$Study_Year)

ggplot(data, aes(x = Study_Year, y = consistency)) +
  geom_boxplot()
```

---

## Adding Colour

```{webr-r}
library(ggplot2)

data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week13_Lab1_grit_data.csv"
data <- read.csv(data_url, stringsAsFactors = FALSE)

data$rev_G1 <- 6 - data$G1
data$rev_G3 <- 6 - data$G3
data$rev_G5 <- 6 - data$G5
data$rev_G6 <- 6 - data$G6
data$consistency <- data$rev_G1 + data$rev_G3 + data$rev_G5 + data$rev_G6
data$perseverance <- data$G2 + data$G4 + data$G7 + data$G8
data$Study_Year <- factor(data$Study_Year)

ggplot(data, aes(x = Study_Year, y = consistency, fill = Study_Year)) +
  geom_boxplot(alpha = 0.7)
```

---

## Making it Pretty

```{webr-r}
library(ggplot2)

data_url <- "https://raw.githubusercontent.com/LittleMonkeyLab/datarepo/main/Y1_Week13_Lab1_grit_data.csv"
data <- read.csv(data_url, stringsAsFactors = FALSE)

data$rev_G1 <- 6 - data$G1
data$rev_G3 <- 6 - data$G3
data$rev_G5 <- 6 - data$G5
data$rev_G6 <- 6 - data$G6
data$consistency <- data$rev_G1 + data$rev_G3 + data$rev_G5 + data$rev_G6
data$perseverance <- data$G2 + data$G4 + data$G7 + data$G8
data$Study_Year <- factor(data$Study_Year)

ggplot(data, aes(x = Study_Year, y = consistency, fill = Study_Year)) +
  geom_boxplot(alpha = 0.7) +
  theme_minimal() +
  labs(title = "Consistency of Interest by Study Year",
       x = "Study Year", y = "Consistency Score", fill = "Study Year") +
  scale_fill_manual(values = c("#E8A87C", "#41B3A3")) +
  theme(legend.position = "none")
```

---

## Summary: Part 4

You learned:

- `mean()`, `sd()`, `length()` for basic stats
- The pipe `|>` to chain operations
- `group_by() |> summarise()` for grouped stats
- `ggplot()` + `geom_boxplot()` for visualisation

---

## Now Practice!

Open the activity page for Part 4 and create your own summaries and plots.

{{< countdown "15:00" start_immediately="true" >}}

::: {.callout-tip}
## Tips
- Always use `na.rm = TRUE` with real data
- Try plotting `perseverance` instead of `consistency`
- Experiment with `theme_classic()` or `theme_bw()`
:::
